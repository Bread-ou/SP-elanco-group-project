<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/views/style.css" rel="stylesheet" type="text/css">
    <title>Title Page</title>
    <style>
        .thumbnails-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        .thumbnail {
            max-width: 100px;
            max-height: 100px;
            object-fit: cover;  
        }
    </style>
</head>

<body>
    <h1>Welcome to the Machine Learning Experience</h1>
    <h2>Upload image</h2>
    <div><% if (errorMessage) { %>
        <div class="error-message">
          <%= errorMessage %>
        </div>
      <% } %></div>

    <form method="POST" action="/upload" enctype="multipart/form-data">
        <input type="file" name="images" accept="image/*" multiple onchange="previewImage(event)">
        <div id="thumbnails" class="thumbnails-container"></div>
        <br>
        <input type="submit">
    </form>
    <script>
        function previewImage(event) {
            var thumbnailsContainer = document.getElementById('thumbnails');
            thumbnailsContainer.innerHTML = ''; // Clear the thumbnails container

            for (var i = 0; i < event.target.files.length; i++) {
                var file = event.target.files[i];
                var reader = new FileReader();

                reader.onload = (function(file) {
                    return function(e) {
                        var img = document.createElement('img');
                        img.src = e.target.result;
                        img.classList.add('thumbnail');
                        img.alt = 'Thumbnail';
                        thumbnailsContainer.appendChild(img);
                    };
                })(file);

                reader.readAsDataURL(file);
            }
        }
    </script>
<a href="/gallery/images" class="button">View Previous Results</a>



</body>
</html>